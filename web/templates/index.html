<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description" content="Options Edge Scanner - Find high-probability options trades with AI-powered market analysis">
    <meta name="theme-color" content="#0a0e14">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Options Edge Scanner</title>
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
    <link rel="apple-touch-icon" href="/static/favicon.svg">
    <!-- Preconnect for faster font loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="/static/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Critical CSS for above-the-fold content -->
    <style>
        body { background: #0a0e14; color: #e6edf3; }
        .app { display: flex; flex-direction: column; min-height: 100vh; }
    </style>
</head>
<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <span class="logo-icon">‚óà</span>
                <span class="logo-text">OPTIONS EDGE SCANNER</span>
            </div>
            <nav class="nav-tabs">
                <a href="/" class="nav-tab active">Scanner</a>
                <a href="/news" class="nav-tab">News & Flow</a>
                <a href="/market" class="nav-tab">Current Market</a>
                <a href="/tools" class="nav-tab">Tools</a>
            </nav>
            <div class="header-actions">
                <button class="btn-help" id="btn-help" title="How to Trade">
                    <span>?</span> How to Trade
                </button>
                <button class="btn-export" id="btn-export" title="Export Results" disabled>
                    <span>‚Üì</span> Export CSV
                </button>
                <div class="header-status" id="status-indicator">
                    <span class="status-dot"></span>
                    <span class="status-text">Ready</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <!-- Left Panel: Strategy Selection -->
            <aside class="panel panel-strategies">
                <h2 class="panel-title">SELECT STRATEGY</h2>
                <div class="strategies-list-scroll" id="strategies-list">
                    <!-- Populated by JS -->
                </div>
                
                <div class="scan-controls">
                    <div class="scan-options">
                        <h3>SCAN TYPE</h3>
                        <div class="radio-group">
                            <label class="radio-label">
                                <input type="radio" name="scan-type" value="quick" checked>
                                <span class="radio-custom"></span>
                                <span>Quick (30 tickers)</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="scan-type" value="full">
                                <span class="radio-custom"></span>
                                <span>Full S&P 100</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="scan-type" value="extended">
                                <span class="radio-custom"></span>
                                <span>Extended (Full S&P 500)</span>
                            </label>
                        </div>
                    </div>
                    
                    <button class="btn-scan" id="btn-scan">
                        <span class="btn-icon">‚ñ∂</span>
                        <span>RUN SCAN</span>
                    </button>
                </div>
            </aside>

            <!-- Center Panel: Results -->
            <section class="panel panel-results">
                <div class="results-header">
                    <div class="results-header-top">
                        <h2 class="panel-title">SCAN RESULTS</h2>
                        <div class="results-controls">
                            <label class="toggle-label">
                                <input type="checkbox" id="toggle-top3" class="toggle-checkbox">
                                <span class="toggle-slider"></span>
                                <span class="toggle-text">Top 3</span>
                            </label>
                        </div>
                    </div>
                    <div class="results-meta" id="results-meta"></div>
                    <div class="results-timestamp" id="results-timestamp"></div>
                </div>
                
                <!-- Progress Bar -->
                <div class="progress-container" id="progress-container" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <div class="progress-text" id="progress-text">Scanning...</div>
                </div>
                
                <!-- Results Table - Scrollable -->
                <div class="results-table-scroll" id="results-container">
                    <div class="empty-state" id="empty-state">
                        <div class="empty-icon">
                            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                        </div>
                        <p>Select a strategy and run a scan to discover high-probability trade setups</p>
                    </div>
                    <table class="results-table" id="results-table" style="display: none;">
                        <thead>
                            <tr>
                                <th>TICKER</th>
                                <th>DIRECTION</th>
                                <th>TRADE</th>
                                <th>STRENGTH</th>
                                <th>PRICE</th>
                                <th>20D RET</th>
                                <th>IV RANK</th>
                            </tr>
                        </thead>
                        <tbody id="results-body">
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Right Panel: Details -->
            <aside class="panel panel-details">
                <h2 class="panel-title">TRADE DETAILS</h2>
                <div class="details-content" id="details-content">
                    <div class="empty-state-small">
                        <p>Click a candidate to view details</p>
                    </div>
                </div>
            </aside>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <span>Paper trade first. Risk management > prediction accuracy.</span>
        </footer>
    </div>

    <!-- How to Trade Modal -->
    <div class="modal" id="help-modal" style="display: none;">
        <div class="modal-content modal-large">
            <button class="modal-close" id="help-modal-close">√ó</button>
            <h2>üìñ How to Use This Scanner & Execute Trades</h2>
            
            <div class="help-section">
                <h3>üéØ Step 1: Understand the Signal</h3>
                <p>Each candidate shows:</p>
                <ul>
                    <li><strong>Direction:</strong> BULLISH (expect price up), BEARISH (expect price down), or NEUTRAL (expect sideways)</li>
                    <li><strong>Trade Type:</strong> The specific option structure to use</li>
                    <li><strong>Strength:</strong> How confident the signal is (higher = better)</li>
                </ul>
            </div>
            
            <div class="help-section">
                <h3>üìä Step 2: Trade Type Explained</h3>
                <div class="trade-types">
                    <div class="trade-type">
                        <h4>CALL_DEBIT (Bullish)</h4>
                        <p>Buy a call spread. You're betting the stock goes UP.</p>
                        <div class="example">
                            <strong>Example:</strong> Stock at $100<br>
                            ‚Üí BUY $100 Call (40 delta)<br>
                            ‚Üí SELL $110 Call (20 delta)<br>
                            ‚Üí Pay ~$3.00 debit<br>
                            ‚Üí Max profit: $7.00 if stock > $110
                        </div>
                    </div>
                    
                    <div class="trade-type">
                        <h4>PUT_DEBIT (Bearish)</h4>
                        <p>Buy a put spread. You're betting the stock goes DOWN.</p>
                        <div class="example">
                            <strong>Example:</strong> Stock at $100<br>
                            ‚Üí BUY $100 Put (40 delta)<br>
                            ‚Üí SELL $90 Put (20 delta)<br>
                            ‚Üí Pay ~$3.00 debit<br>
                            ‚Üí Max profit: $7.00 if stock < $90
                        </div>
                    </div>
                    
                    <div class="trade-type">
                        <h4>CALL_CREDIT / PUT_CREDIT</h4>
                        <p>Sell a spread. You collect premium upfront.</p>
                        <div class="example">
                            <strong>Example:</strong> Stock at $100<br>
                            ‚Üí SELL $110 Call (25 delta)<br>
                            ‚Üí BUY $115 Call (10 delta)<br>
                            ‚Üí Collect ~$1.50 credit<br>
                            ‚Üí Max profit: $1.50 if stock < $110
                        </div>
                    </div>
                    
                    <div class="trade-type">
                        <h4>IRON_CONDOR (Neutral)</h4>
                        <p>Sell both a call spread AND put spread. Profit if stock stays in range.</p>
                        <div class="example">
                            <strong>Example:</strong> Stock at $100<br>
                            ‚Üí SELL $110 Call + BUY $115 Call<br>
                            ‚Üí SELL $90 Put + BUY $85 Put<br>
                            ‚Üí Collect ~$2.00 total credit<br>
                            ‚Üí Max profit if stock stays $90-$110
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="help-section">
                <h3>üõí Step 3: How to Actually Buy</h3>
                <ol>
                    <li><strong>Open your broker</strong> (Robinhood, TD Ameritrade, Schwab, etc.)</li>
                    <li><strong>Search for the ticker</strong> shown in the scanner</li>
                    <li><strong>Go to Options Chain</strong></li>
                    <li><strong>Select expiration:</strong> Use the DTE shown (e.g., 30-45 days out)</li>
                    <li><strong>Find the strikes:</strong> Use delta targets shown (e.g., ~0.40 for long leg)</li>
                    <li><strong>Build the spread:</strong> Select both legs (buy one, sell one)</li>
                    <li><strong>Set limit price:</strong> Start at mid-price, adjust if needed</li>
                    <li><strong>Submit order</strong></li>
                </ol>
            </div>
            
            <div class="help-section">
                <h3>‚ö†Ô∏è Step 4: Risk Management (CRITICAL)</h3>
                <ul>
                    <li><strong>Position Size:</strong> Never risk more than 2% of your account per trade</li>
                    <li><strong>Take Profit:</strong> Close at 50% of max gain (don't be greedy)</li>
                    <li><strong>Stop Loss:</strong> Close if losing 50% of what you paid</li>
                    <li><strong>Time Stop:</strong> Close if < 10 DTE remaining</li>
                    <li><strong>Max Positions:</strong> No more than 5 trades open at once</li>
                </ul>
            </div>
            
            <div class="help-section warning">
                <h3>üö® Important Warnings</h3>
                <ul>
                    <li>PAPER TRADE FIRST for at least 20 trades</li>
                    <li>Check earnings dates - don't hold through earnings</li>
                    <li>Use limit orders, not market orders</li>
                    <li>If the spread is wide (> 10%), skip the trade</li>
                    <li>This is NOT financial advice - you can lose money</li>
                </ul>
            </div>
        </div>
    </div>

    <script src="/static/js/api-config.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>
